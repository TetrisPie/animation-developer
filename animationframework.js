function config(animation){animation.config={maximumAnimationAge:timeInMinutes(10)}}function moveActor(actor){actor.position.x+=actor.vector.x;actor.position.y+=actor.vector.y;actor.image.style.left=actor.position.x+"px";actor.image.style.top=actor.position.y+"px";actor.lastVector=actor.vector;actor.vector={x:0,y:0}}function tiltActor(actor){actor.tilt=(actor.tilt+actor.spin)%360;actor.image.style.transform="rotate("+actor.tilt+"deg)";actor.image.style.webkitTransform="rotate("+actor.tilt+"deg)";actor.image.style.msTransform="rotate("+actor.tilt+"deg)";actor.image.style.OTransform="rotate("+actor.tilt+"deg)";actor.spin=0}function visibleOnStage(actor){return!notVisibleOnStage}function notVisibleOnStage(actor){return actor.position.x>actor.scene.dimensions.x||actor.position.x+actor.imagesize.x<0||actor.position.y+actor.imagesize.y<0||actor.position.y>actor.scene.dimensions.y}function animateactor(actor){if(actor.doesReset&&notVisibleOnStage(actor)){if(actor.waitingForReset){if(t()-actor.waitingForResetSince>=actor.resetDelay){actor.reset();actor.waitingForReset=!1}}else if(actor.doesReset){actor.alterOpacity(0);actor.waitingForReset=!0;actor.waitingForResetSince=t()}}else if(actor.delay>0&&!actor.finishedDelaying)actor.startedDelayingAt==null?actor.startedDelayingAt=t():t()>=actor.startedDelayingAt+actor.delay&&(actor.finishedDelaying=!0);else{if(actor.phases.length>1&&actor.currentPhase()!=actor.oldPhase){actor.image.src=actor.phases[actor.currentPhase()];actor.oldPhase=actor.currentPhase()}for(var i=0;i<actor.behaviors.length;i++)actor.behaviors[i].applybehavior();(actor.vector.x!=0||actor.vector.y!=0)&&moveActor(actor);(actor.spin!=0||actor.tilt!=0)&&tiltActor(actor)}}function compatibleBrowser(url){var agent=navigator.userAgent,blacklist=new Array;blacklist.push("MSIE 6");blacklist.push("MSIE 7");blacklist.push("MSIE 8");var isCompatible=!0;for(var i=blacklist.length-1;i>=0;i--)if(agent.toLowerCase().indexOf(blacklist[i].toLowerCase())>0){isCompatible=!1;break}return isCompatible}function bindEvent(el,eventName,eventHandler,reacting){typeof reacting!="undefined"&&(reacting=null);el.addEventListener?el.addEventListener(eventName,eventHandler,!1):el.attachEvent&&el.attachEvent("on"+eventName,eventHandler)}function unbindEvent(el,callee){this.removeEventListener("click",arguments.callee,!1)}function getClickPosition(el){var stage=document.getElementById("stage");stageX=stage.offsetLeft-stage.scrollLeft+stage.clientLeft;stageY=stage.offsetTop-stage.scrollTop+stage.clientTop;var clickX=el.clientX-stageX,clickY=el.clientY-stageY;l("click, "+clickX+", "+clickY)}function fadeIn(domobject,length){if(notNumeric(domobject.style.opacity)||domobject.style.opacity<0)domobject.style.opacity=0;notNumeric(length)&&(length=1e3);prepareFade(domobject,length,1)}function fadeOut(domobject,length){if(notNumeric(domobject.style.opacity)||domobject.style.opacity>1)domobject.style.opacity=1;notNumeric(length)&&(length=1e3);prepareFade(domobject,length,0)}function executeFadeInTimeoutLoop(domobject,startOpacity,targetOpacity,length,framesPerSecond,frameLength){var opacityDifference=targetOpacity-startOpacity,stepSize=opacityDifference/(length/framesPerSecond),stepAmount=opacityDifference/stepSize,newOpacity=startOpacity+stepSize;if(newOpacity>1||newOpacity<0)domobject.style.opacity=targetOpacity;else{domobject.style.opacity=newOpacity;setTimeout(function(){executeFadeInTimeoutLoop(domobject,newOpacity,targetOpacity,length-frameLength,framesPerSecond,frameLength)},frameLength)}}function prepareFade(domobject,length,targetOpacity){var startOpacity=parseFloat(domobject.style.opacity),framesPerSecond=30,frameLength=1e3/framesPerSecond;executeFadeInTimeoutLoop(domobject,startOpacity,targetOpacity,length,framesPerSecond,frameLength)}function randomId(){return"id"+Math.floor(Math.random()*1e4)+Date.now()}function l(msg){developermode&&console.log(msg)}function truth(expression){return typeof expression=="undefined"||expression==="undefined"?!1:Boolean(expression)}function distance(x1,y1,x2,y2){return Math.abs(Math.sqrt((x2-x1)*(x2-x1)+(y2-y1)*(y2-y1)))}function vector(x1,y1,x2,y2){var d=distance(x1,y1,x2,y2);return{x:(x2-x1)/d,y:(y2-y1)/d,distance:d}}function now(){return(new Date).getTime()}function timeInMinutes(minutes){return minutes*1e3*60}function seconds(){return parseInt(now()/1e3)}function floatValueOfOr(n,or){return isNumeric(n)?parseFloat(n):or}function isNumeric(n){return!notNumeric(n)}function notNumeric(n){return typeof n=="undefined"||isNaN(parseFloat(n))||!isFinite(n)}function round(number,decimals){decimals<0&&(decimals=0);this.q=Math.pow(10,decimals);return Math.round(number*this.q)/this.q}function cutOffPx(value){var length=value.length;return parseFloat(value.toString().substring(0,length-2))}function createDiv(id,cssclass){var div=document.createElement("div");div.setAttribute("id",id);div.setAttribute("class",cssclass);return div}function t(){return now()}function browserCompatible(){try{var tmp=new Audio;return!0}catch(e){return!1}}function minutesToTime(minutes){return minutes*60*1e3}function getIntegerFromEndOfString(myString){return parseInt(myString.match(/\d+$/)[0])}function rescale(domobject,newscale){domobject.style.transformOrigin="0 0";domobject.style.transform="scale("+newscale+", "+newscale+")";domobject.style.msTransformOrigin="0 0";domobject.style.msTransform="scale("+newscale+", "+newscale+")";domobject.style.webkitTransformOrigin="0 0";domobject.style.webkitTransform="scale("+newscale+", "+newscale+")";domobject.style.OTransformOrigin="0 0";domobject.style.OTransform="scale("+newscale+", "+newscale+")"}function Animation(width,height,firstSceneId,minWidth,maxWidth,minHeight,maxHeight){config(this);this.firstSceneId=firstSceneId;this.loadedScenes=new Array;this.stageDiv=createDiv("stage","stage");this.stageDiv.style.width=width+"px";this.stageDiv.style.height=height+"px";this.width=width;this.height=height;this.textIsDisplaying=!0;this.minWidth=typeof minWidth=="undefined"?this.width:minWidth;this.maxWidth=typeof maxWidth=="undefined"?this.width:maxWidth;this.minHeight=typeof minHeight=="undefined"?this.height:minHeight;this.maxHeight=typeof maxHeight=="undefined"?this.height:maxHeight;this.startAnimationTimestamp=now();this.age=function(){return now()-this.startAnimationTimestamp};this.scaleToWindow=function(){var winWidth=window.innerWidth,winHeight=window.innerHeight,newHeight=winHeight,newWidth=winWidth,winWidth=winWidth,windowFactor=window.innerWidth/window.innerHeight,animationFactor=this.width/this.height;if(this.minWidth!=0&&animationFactor>windowFactor){winWidth<this.minWidth?winWidth=this.minWidth:winWidth>this.maxWidth&&(winWidth=this.maxWidth);var scaleFactor=winWidth/this.width;newHeight=winWidth*scaleFactor}else if(this.minWidth!=0){winHeight<this.minHeight?winHeight=this.minHeight:winHeight>this.maxHeight&&(winHeight=this.maxHeight);var scaleFactor=winHeight/this.height;newWidth=winHeight*scaleFactor}scaleFactor!=1&&rescale(this.stageDiv,scaleFactor);window.animationwrapper.style.marginTop=(window.innerHeight-parseInt(this.height*scaleFactor))/2+"px";window.animationwrapper.style.width=newWidth+"px";window.animationwrapper.style.marginLeft=(window.innerWidth-parseInt(this.width*scaleFactor))/2+"px";window.animationwrapper.style.height=newHeight+"px"};this.loadScene=function(sceneid){for(var i=this.loadedScenes.length-1;i>=0;i--)if(this.loadedScenes[i].id===sceneid)return this.loadedScenes[i];var newScene=eval(sceneid+"()");newScene.setDimensions(width,height);this.loadedScenes.push(newScene);this.stageDiv.appendChild(newScene.div);newScene.makeInvisible();return newScene};this.reloadAndFadeToScene=function(sceneid){var sceneNum=parseInt(/scene(\d+)/.exec(sceneid)[1],10);window.location.hash=sceneNum;var fadeTime=1200;fadeOut(window.animationwrapper,fadeTime/2);setTimeout("window.location.reload()",fadeTime/2+250)};this.showScene=function(sceneid,maximumAnimationAge){if(this.animation.age()>=this.config.maximumAnimationAge)reloadAndFadeToScene(sceneid);else if(typeof this.currentScene=="undefined"||this.currentScene.age()>1e3){typeof this.currentScene!="undefined"&&this.currentScene.cleanup();this.currentScene=loadScene(sceneid);var sceneNum=getIntegerFromEndOfString(sceneid);window.location.hash=sceneNum==0?"":sceneNum;this.currentScene.enterActors();this.currentScene.resetActors();this.currentScene.makeOthersInvisible();this.currentScene.muteOthers();this.currentScene.resetAge();this.dropUnneededScenes(this.currentScene.preloadSceneIds);this.loadNeededScenes(this.currentScene.preloadSceneIds);window.forceReloadTimer=setTimeout('reloadAndFadeToScene("'+sceneid+'")',window.animation.config.maximumAnimationAge)}};this.showFirstScene=function(){this.showScene(this.firstSceneId)};this.loadedSceneIds=function(){var result=new Array;for(var i=this.loadedScenes.length-1;i>=0;i--)result.push(this.loadedScenes[i].id);return result};this.dropUnneededScenes=function(neededScenes){var droplist=this.loadedSceneIds().minus(neededScenes);for(var i=droplist.length-1;i>=0;i--)this.dropScene(droplist[i])};this.loadNeededScenes=function(neededScenes){var loadlist=neededScenes.minus(this.loadedSceneIds());for(var i=loadlist.length-1;i>=0;i--)this.loadScene(loadlist[i])};this.dropScene=function(sceneid){for(var i=this.loadedScenes.length-1;i>=0;i--)if(this.loadedScenes[i].id===sceneid){var element=document.getElementById(sceneid);this.stageDiv.removeChild(this.loadedScenes[i].div);this.loadedScenes=this.loadedScenes.without(i)}};return this}function loadAnimation(title,width,height,firstSceneId,minWidth,maxWidth,minHeight,maxHeight){if(!compatibleBrowser()){document.getElementById("backupdiv").style.display="block";return}animationLoader(title,width,height,firstSceneId,minWidth,maxWidth,minHeight,maxHeight)}function loadAnimationInto(title,targetDivId,firstSceneId,width,height){var targetDiv=document.getElementById(targetDivId);animationLoader(title,width,height,firstSceneId,width,width,height,height,targetDiv)}function animationLoader(title,width,height,firstSceneId,minWidth,maxWidth,minHeight,maxHeight,targetDiv){document.title=title;if(window.onload)var oldOnload=window.onload;window.onload=function(){oldOnload&&oldOnload();setTimeout(function(){window.scrollTo(0,1)},100);window.animation=Animation(width,height,firstSceneId,minWidth,maxWidth,minHeight,maxHeight);if(typeof targetDiv=="undefined"){window.animationwrapper=createDiv("animationwrapper","");window.document.body.appendChild(window.animationwrapper);window.animationwrapper.appendChild(this.stageDiv);window.animation.scaleToWindow()}else{window.animationwrapper=targetDiv;window.animationwrapper.appendChild(this.stageDiv)}var sceneNum=parseInt(window.location.hash.substring(1));isNaN(sceneNum)?window.animation.showScene(firstSceneId):eval("window.animation.showScene('scene"+sceneNum+"')");window.animation.startLoop();fadeIn(window.animationwrapper)};if(window.onresize)var oldOnresize=window.onresize;window.onresize=function(){oldOnresize&&oldOnresize();window.animation.scaleToWindow()}}function startLoop(){this.animloop=function(){requestAnimFrame(animloop);for(var i=0;i<window.currentScene.actors.length;i++)animateactor(window.currentScene.actors[i])};this.animloop()}function Plugin(delay,easeIn,actor,triggeredByAction,reactionTargetIndex){this.delay=delay;this.easeIn=typeof easeIn!="undefined"?easeIn:0;this.needsToCalculateEasein=this.easeIn>0;this.startAnimationTimestamp=new Date;this.triggeredByAction=!1;var targetObject=null;this.setup=function(){this.actor=actor;this.triggeredByAction=truth(triggeredByAction);isNumeric(reactionTargetIndex)?this.targetObject=actor.reactionTargets[reactionTargetIndex]:this.targetObject=actor};this.setup();this.resetStartAnimationTimestamp=function(){this.startAnimationTimestamp=now()};this.applybehavior=function(){};this.resetPlugin=function(){this.done=!1;this.resetStartAnimationTimestamp();this.needsToCalculateEasein=this.easeIn>0};this.isDoneWhen=function(condition){this.done=condition};this.reset=function(){this.resetPlugin()};this.cleanupPlugin=function(){};this.cleanup=function(){this.cleanupPlugin()};this.age=function(){return new Date-this.startAnimationTimestamp};this.factor=function(){if(this.needsToCalculateEasein&&this.easeIn>0&&this.age()<this.easeIn)return Math.cos(this.age()/this.easeIn*(Math.PI/2)-Math.PI/2);this.needsToCalculateEasein=!1;return 1};return this}function Scene(id,title){this.id=id;this.title=typeof title!="undefined"?title:id;this.div=createDiv(id,"scene");this.stage=null;this.dimensions={x:0,y:0};this.isVisible=!1;this.actors=[];this.texts=[];this.textDisplaying=!0;this.alwaysShowsText=!1;this.displayedAt=Date.now();this.resetAge=function(){this.displayedAt=Date.now();return this.displayedAt};this.age=function(){return Date.now()-this.displayedAt};this.alwaysShowText=function(){this.alwaysShowsText=!0};this.preloadSceneIds=[id];this.resetActors=function(){for(var i=this.actors.length-1;i>=0;i--)this.actors[i].reset()};this.removeBehaviorsThatCameFromReacts=function(){for(var i=this.actors.length-1;i>=0;i--)try{this.actors[i].removeBehaviorsThatCameFromReacts()}catch(e){}};this.setDimensions=function(width,height){this.dimensions={x:width,y:height};this.div.style.width=this.dimensions.x+"px";this.div.style.height=this.dimensions.y+"px"};this.makeVisible=function(){this.div.style.visibility="visible";this.isVisible=!0};this.makeInvisible=function(){this.div.style.visibility="hidden";this.isInvisible=!1;this.resetActors();this.removeBehaviorsThatCameFromReacts()};this.makeInvisible();this.cleanup=function(){for(var i=this.actors.length-1;i>=0;i--)this.actors[i].cleanupBehaviors()};this.makeOthersInvisible=function(){var showTextInCurrent=window.animation.textIsDisplaying;for(var i=window.animation.loadedScenes.length-1;i>=0;i--)if(window.animation.loadedScenes[i].id.match(this.id))this.makeVisible();else{window.animation.loadedScenes[i].makeInvisible();window.animation.loadedScenes[i].hideText()}showTextInCurrent||this.alwaysShowsText?this.showText():this.hideText();window.animation.textIsDisplaying=showTextInCurrent};this.mute=function(){for(var i=0;i<this.actors.length;i++)try{this.actors[i].pauseAudio()}catch(e){}};this.muteOthers=function(){for(var i=window.animation.loadedScenes.length-1;i>=0;i--)window.animation.loadedScenes[i].id.match(this.id)||window.animation.loadedScenes[i].mute()};this.createActor=function(filename,startAtX,startAtY,width,height){var actor=new Actor(filename,startAtX,startAtY,width,height);actor.scene=this;this.actors.push(actor);return actor};this.enterActors=function(){for(var i=0;i<this.actors.length;i++)this.actors[i].enter(this)};this.putOnStage=function(myStageDiv){myStageDiv.appendChild(this.div);myStageDiv.scene=this;this.stage=myStageDiv;this.dimensions={x:parseInt(myStageDiv.style.width),y:parseInt(myStageDiv.style.height)};this.div.style.width=this.dimensions.x+"px";this.div.style.height=this.dimensions.y+"px";for(var i=0;i<window.stage.scene.actors.length;i++)this.actors[i].enter(this)};this.write=function(myX,myY,html,cssclass){var newText=document.createElement("div");newText.innerHTML=html;newText.setAttribute("class","text "+(typeof cssclass=="undefined"?"":cssclass));newText.style.left=myX+"px";newText.style.top=myY+"px";this.div.appendChild(newText);this.texts.push(newText)};this.showText=function(){this.textDisplaying=!0;for(var i=this.texts.length-1;i>=0;i--)this.texts[i].style.visibility="visible";window.animation.textIsDisplaying=!0};this.hideText=function(){this.textDisplaying=!1;for(var i=this.texts.length-1;i>=0;i--)this.texts[i].style.visibility="hidden";window.animation.textIsDisplaying=!1};return this}function Appearing(actor,startAfter,appearLength,startsVisible,triggeredByAction,reactionTargetIndex){var appearing=new Plugin(0,0,actor,triggeredByAction,reactionTargetIndex);appearing.originalOpacity=actor.currentOpacity;appearing.originalVisibility=actor.image.style.visibility;appearing.newOpacity=0;appearing.opacityStep=0;appearing.appearLength=appearLength;typeof startsVisible!="undefined"&&startsVisible===!0?appearing.startsVisible=!0:appearing.startsVisible=!1;appearing.cleanup=function(){this.cleanupPlugin();this.startsVisible&&this.targetObject.setVisible()};appearing.reset=function(){this.resetPlugin();this.startsVisible?this.targetObject.setVisible():this.targetObject.setInvisible();this.opacityStep=60/this.appearLength};appearing.reset();appearing.applybehavior=function(){if(!this.done&&this.targetObject.age()>startAfter){this.targetObject.setVisible();this.newOpacity=this.newOpacity.addUntilTarget(this.opacityStep,1);this.targetObject.alterOpacity(this.newOpacity);this.isDoneWhen(this.targetObject.currentOpacity>=1)}};return appearing}function ChangingImageSrc(actor,newPath,triggeredByAction,reactionTargetIndex){var changingImageSrc=new Plugin(0,0,actor,triggeredByAction,reactionTargetIndex);changingImageSrc.applybehavior=function(){this.targetObject.changeImageSrc(newPath)};return changingImageSrc}function Circling(actor,radius,hertz,tilt,triggeredByAction,reactionTargetIndex){var circling=new Plugin(0,0,actor,triggeredByAction,reactionTargetIndex);circling.tiĺt=tilt;circling.reset=function(){circling.resetPlugin();circling.newX=0;circling.newY=0;circling.vectorX=0;circling.vectorY=0;circling.oldX=0;circling.oldY=0;circling.firstRun=!0};circling.counter=0;circling.applybehavior=function(){this.counter=this.counter+1;typeof this.circlingStartedAt=="undefined"&&(this.circlingStartedAt=now());this.tmpValue=this.circlingStartedAt-now();this.newX=radius*Math.cos(this.tmpValue/500*hertz)*2;this.newY=radius*Math.sin(this.tmpValue/500*hertz)*2;this.vectorX=this.newX-this.oldX;this.vectorY=this.newY-this.oldY;this.oldX=this.newX;this.oldY=this.newY;if(this.firstRun)this.firstRun=!1;else{this.targetObject.vector.x+=this.vectorX;this.targetObject.vector.y+=this.vectorY}this.counter<=10&&l("this.tilt: "+this.tilt)};return circling}function MovementCloning(actor,parentActor,distanceX,distanceY,triggeredByAction,reactionTargetIndex){var movementCloning=new Plugin(0,0,actor,triggeredByAction,reactionTargetIndex);movementCloning.applybehavior=function(){this.targetObject.position.x=parentActor.position.x+distanceX;this.targetObject.position.y=parentActor.position.y+distanceY;this.targetObject.image.style.left=this.targetObject.position.x+"px";this.targetObject.image.style.top=this.targetObject.position.y+"px";this.targetObject.tilt=parentActor.tilt};return movementCloning}function CountResetter(actor,triggeredByAction,reactionTargetIndex){var countresetter=new Plugin(0,0,actor,triggeredByAction,reactionTargetIndex);countresetter.reset=function(){this.resetPlugin();this.targetObject.counter=0;this.targetObject.addsToCounter(0)};countresetter.reset();return countresetter}function Dissolving(actor,startAfter,dissolveLength,triggeredByAction,reactionTargetIndex){var dissolving=new Plugin(0,0,actor,triggeredByAction,reactionTargetIndex);dissolving.originalOpacity=actor.currentOpacity;dissolving.originalVisibility=actor.image.style.visibility;dissolving.startAfter=startAfter;dissolving.newOpacity=0;dissolving.opacityStep=60/dissolveLength;dissolving.reset=function(){this.resetPlugin();this.newOpacity=this.originalOpacity;this.targetObject.image.style.visibility=this.originalVisibility;this.targetObject.alterOpacity(this.originalOpacity)};dissolving.reset();dissolving.cleanup=function(){this.targetObject.image.style.visibility=this.originalVisibility;this.targetObject.alterOpacity(this.originalOpacity)};dissolving.applybehavior=function(){if(!this.done&&this.targetObject.age()>this.startAfter){this.newOpacity=this.newOpacity.subtractUntilZero(this.opacityStep);this.targetObject.alterOpacity(this.newOpacity);this.isDoneWhen(this.newOpacity<=0&&this.targetObject.currentOpacity<=0);this.done&&this.targetObject.setInvisible()}};return dissolving}function Drifting(actor,forceX,forceY,triggeredByAction,reactionTargetIndex){var drifting=new Plugin(0,0,actor,triggeredByAction,reactionTargetIndex);drifting.reset=function(){this.resetPlugin();this.force={x:forceX,y:forceY}};drifting.reset();drifting.applybehavior=function(){this.targetObject.vector.x+=this.force.x;this.targetObject.vector.y+=this.force.y};return drifting}function Cloning(actor,parentActor,distanceX,distanceY,triggeredByAction,reactionTargetIndex){}function HavingText(actor,content,divid,domclass,triggeredByAction,reactionTargetIndex){var havingText=new Plugin(0,0,actor,triggeredByAction,reactionTargetIndex);havingText.targetObject.originalText=String(content);havingText.targetObject.hasTextDiv=document.createElement("div");havingText.targetObject.hasTextDiv.setAttribute("id",divid);havingText.targetObject.hasTextDiv.setAttribute("class","hastext "+domclass);havingText.targetObject.hasTextDivInner=document.createElement("div");havingText.targetObject.hasTextDivInner.setAttribute("class","inner");havingText.targetObject.hasTextDiv.appendChild(havingText.targetObject.hasTextDivInner);havingText.targetObject.hasTextDiv.style.zIndex="2";havingText.targetObject.hasTextDiv.style.width=havingText.targetObject.imagesize.x+"px";havingText.targetObject.hasTextDiv.style.height=havingText.targetObject.imagesize.y+"px";havingText.targetObject.hasTextDiv.style.pointerEvents="none";havingText.targetObject.scene.div.appendChild(havingText.targetObject.hasTextDiv);havingText.targetObject.hasTextDivInner.innerHTML=content;havingText.applybehavior=function(){havingText.targetObject.hasTextDiv.style.visibility=havingText.targetObject.image.style.visibility;havingText.targetObject.hasTextDiv.style.left=havingText.targetObject.position.x+"px";havingText.targetObject.hasTextDiv.style.top=havingText.targetObject.position.y+"px";havingText.targetObject.hasTextDiv.style.opacity=havingText.targetObject.currentOpacity;havingText.targetObject.hasTextDiv.style.transform="rotate("+havingText.targetObject.tilt+"deg)";havingText.targetObject.hasTextDiv.style.webkitTransform="rotate("+havingText.targetObject.tilt+"deg)";havingText.targetObject.hasTextDiv.style.msTransform="rotate("+havingText.targetObject.tilt+"deg)";havingText.targetObject.hasTextDiv.style.transformOrigin=havingText.targetObject.image.style.transformOrigin;havingText.targetObject.hasTextDiv.style.webkitTransformOrigin=havingText.targetObject.image.style.webkitTransformOrigin;havingText.targetObject.hasTextDiv.style.msTransformOrigin=havingText.targetObject.image.style.msTransformOrigin};return havingText}function Linking(actor,url,triggeredByAction,reactionTargetIndex){linking=new Plugin(0,0,actor,triggeredByAction,reactionTargetIndex);linking.actor=actor;linking.url=url;/iPhone|iPad|iPod|BlackBerry/i.test(navigator.userAgent)?bindEvent(linking.targetObject.image,"touchstart",function(){this.gotourl()}):bindEvent(linking.targetObject.image,"mousedown",function(){this.gotourl()});linking.actor.image.gotourl=function(){this.removeEventListener("mousedown",arguments.callee,!1);location.href=url};linking.actor.image.style.cursor="pointer";linking.applybehavior=function(){};return linking}function Moving(actor,initialForceX,initialForceY,friction,gravitation,delay,easeIn){var moving=new Plugin(delay,easeIn);moving.actor=actor;moving.force={x:initialForceX,y:initialForceY};moving.speed={x:0,y:0};moving.friction=friction;moving.gravitation=gravitation;moving.triggeredByTouch=!1;moving.reset=function(){this.resetPlugin();moving.speed={x:0,y:0};moving.force={x:initialForceX,y:initialForceY}};moving.reset();moving.applybehavior=function(){if(this.factor()!=1){console.log("this.factor(): "+this.factor());console.log("this.age(): "+this.age())}moving.force.x=moving.force.x*.9;moving.force.y=moving.force.y*.9;typeof moving.gravitation!="undefined"&&(moving.force.y+=moving.gravitation/50);moving.speed.x+=moving.force.x;moving.speed.y+=moving.force.y;if(typeof moving.friction!="undefined"){moving.speed.x=moving.speed.x*(1-moving.friction/50);moving.speed.y=moving.speed.y*(1-moving.friction/50)}moving.actor.vector.x+=moving.speed.x*this.factor();moving.actor.vector.y+=moving.speed.y*this.factor()};return moving}function MovingTo(actor,targetX,targetY,forceX,forceY,triggeredByAction,reactionTargetIndex){var movingto=new Plugin(0,.5);movingto.triggeredByAction=triggeredByAction;movingto.actor=actor;isNumeric(reactionTargetIndex)?movingto.targetObject=actor.reactionTargets[reactionTargetIndex]:movingto.targetObject=actor;movingto.reset=function(){this.force={x:forceX,y:forceY};this.finishedMovingTo=!1};movingto.reset();movingto.applybehavior=function(){if(!this.finishedMovingTo){var moveVector=vector(this.targetObject.position.x,this.targetObject.position.y,targetX,targetY);if(moveVector.distance>2){this.targetObject.vector.x+=this.force.x*moveVector.x;this.targetObject.vector.y+=this.force.y*moveVector.y}else this.finishedMovingTo=!0}};return movingto}function Multichoicing(actor,triggeredByAction,reactionTargetIndex){var multichoicing=new Plugin(0,0,actor,triggeredByAction,reactionTargetIndex);multichoicing.reset=function(){this.resetPlugin()};multichoicing.reset();multichoicing.applybehavior=function(){};return multichoicing}function AppearingAsQuestion(actor,triggeredByAction,reactionTargetIndex){var appearingAsQuestion=Plugin(0,0,actor,triggeredByAction,reactionTargetIndex);appearingAsQuestion.targetObject.setVisible();for(var i=appearingAsQuestion.targetObject.rightanswers.length-1;i>=0;i--)appearingAsQuestion.targetObject.rightanswers[i].setVisible();for(var i=appearingAsQuestion.targetObject.wronganswers.length-1;i>=0;i--)appearingAsQuestion.targetObject.wronganswers[i].setVisible();return appearingAsQuestion}function Playing(actor,audioFilename,playingImagePath,looped,onload,betweenLoops){var playing=new Plugin(0,0);playing.actor=actor;playing.actor.playingImagePath="images/"+playingImagePath;playing.actor.waitingImagePath=playing.actor.image.src;playing.actor.pulsatesWhilePlaying=!1;playing.actor.playLooped=looped;playing.actor.playOnLoad=onload;playing.actor.playOnLoadExecuted=!1;playing.reset=function(){playing.actor.playOnLoadExecuted=!1;playing.actor.audioplaying=!1};playing.reset();playing.applybehavior=function(){if(this.actor.playOnLoad&&!this.actor.playOnLoadExecuted){this.actor.playOnLoadExecuted=!0;this.actor.toggleAudio()}};playing.actor.showPlayingImage=function(){this.image.src=this.playingImagePath;if(this.pulsatesWhilePlaying){l("pulsates");this.pulsates(3,.1,0,0,!0)}};playing.actor.showWaitingImage=function(){this.image.src=this.waitingImagePath;this.pulsatesWhilePlaying&&(this.behaviors=[])};playing.actor.audio=document.createElement("audio");var source=document.createElement("source");if(playing.actor.audio.canPlayType("audio/mpeg;")){source.type="audio/mpeg";source.src="audio/"+audioFilename+".mp3"}else{source.type="audio/ogg";source.src="audio/"+audioFilename+".ogg"}playing.actor.audio.appendChild(source);playing.actor.audio.actor=playing.actor;typeof betweenLoops=="undefined"&&(betweenLoops=0);playing.actor.audio.betweenLoops=betweenLoops;playing.actor.playLooped?bindEvent(playing.actor.audio,"ended",function(){playing.actor.showWaitingImage(this.actor);playing.actor.showWaitingImage(this.actor);setTimeout(function(){playing.actor.audioplaying&&playing.actor.toggleAudio("play")},playing.actor.audio.betweenLoops)}):bindEvent(playing.actor.audio,"ended",function(){playing.actor.showWaitingImage(this.actor);playing.actor.audioplaying=!1});playing.actor.toggleAudio=function(force_play_or_pause){force_play_or_pause==="play"?this.playAudio():force_play_or_pause=="pause"?this.pauseAudio():this.audioplaying?this.pauseAudio():this.playAudio()};playing.actor.playAudio=function(){this.audio.currentTime&&(this.audio.currentTime=0);this.audio.play();this.showPlayingImage();this.audioplaying=!0};playing.actor.pauseAudio=function(){this.audio.pause();this.audioplaying=!1;this.showWaitingImage()};playing.actor.reacts("this.toggleAudio();");return playing}function Popup(actor,url,width,height,offsetX,offsetY,closeAfter,triggeredByAction,reactionTargetIndex){var popup=new Plugin(0,0,actor,triggeredByAction,reactionTargetIndex);typeof window.closepopup=="undefined"&&(window.closepopup=function(iframeDivId){var iframe=document.getElementById(iframeDivId);iframe.scene.div.removeChild(iframe);iframe.actor.popup=!1});popup.cleanup=function(){popup.cleanupPlugin();popup.targetObject.popup&&popup.destroy()};popup.create=function(){popup.iframeDivId=randomId();popup.wrapdiv=window.document.createElement("DIV");popup.wrapdiv.setAttribute("id",popup.iframeDivId);popup.wrapdiv.setAttribute("class","popupdiv");popup.wrapdiv.style.width=width+"px";popup.wrapdiv.style.height=height+"px";popup.wrapdiv.style.left=popup.targetObject.position.x+offsetX+"px";popup.wrapdiv.style.top=popup.targetObject.position.y+offsetY+"px";popup.wrapdiv.scene=popup.targetObject.scene;popup.wrapdiv.actor=popup.targetObject;var closer=window.document.createElement("a");closer.setAttribute("class","closer");var linkText=document.createTextNode("×");closer.href="javascript:void(0)";closer.setAttribute("onclick","closepopup('"+popup.iframeDivId+"');");closer.appendChild(linkText);popup.wrapdiv.appendChild(closer);popup.iframe=window.document.createElement("IFRAME");popup.iframe.setAttribute("src",url);popup.iframe.setAttribute("class","iframe");popup.iframe.style.width=width+"px";popup.iframe.style.height=height+"px";popup.targetObject.popup=popup;popup.wrapdiv.appendChild(popup.iframe);popup.targetObject.scene.div.appendChild(popup.wrapdiv);closeAfter>0&&(popup.targetObject.popup.closetimeout=setTimeout("window.closepopup('"+popup.iframeDivId+"')",closeAfter))};popup.destroy=function(){popup.targetObject.scene.div.removeChild(document.getElementById(popup.targetObject.popup.iframeDivId));popup.targetObject.popup=!1};popup.targetObject.popup?popup.destroy():popup.create();return popup}function Pulsating(actor,hertz,strength,pulsateHowOften,triggeredByAction,reactionTargetIndex){var pulsating=new Plugin(0,0,actor,triggeredByAction,reactionTargetIndex),scale=1,oldScale=1,direction="up",counter=0,counted=!1;pulsating.reset=function(){if(typeof pulsateHowOften=="undefined"||notNumeric(pulsateHowOften))pulsateHowOften=0;scale=1;oldScale=1;direction="up";counter=0;counted=!1};pulsating.reset();pulsating.applybehavior=function(){if(pulsateHowOften===0||counter<=pulsateHowOften){oldScale=scale;scale=1+strength/10*Math.sin((new Date-this.startAnimationTimestamp)*hertz*2/500);if(oldScale<scale&&direction==="down")direction="up";else if(oldScale>scale&&direction==="up"){direction="down";counted=!1}pulsating.targetObject.image.style.webkitTransform="scale("+scale+", "+scale+")";if(!counted&&direction==="up"&&scale>1){counter++;counted=!0}}};return pulsating}function Rotating(actor,hertz,triggeredByAction,reactionTargetIndex){var rotating=new Plugin(0,0,actor,triggeredByAction,reactionTargetIndex);rotating.spin=6*hertz;rotating.applybehavior=function(){this.targetObject.spin+=this.spin};return rotating}function Shaking(actor,peakX,peakY,hertz,triggeredByAction,reactionTargetIndex){var shaking=new Plugin(0,0,actor,triggeredByAction,reactionTargetIndex);shaking.reset=function(){this.peak={x:peakX/2,y:peakY/2};this.hertz=hertz;this.actor=actor;this.force={x:0,y:0};this.shakingStartedAt=null};shaking.applybehavior=function(){typeof this.shakingStartedAt===null&&(this.shakingStartedAt=now());this.tmpValue=Math.sin((this.shakingStartedAt-now())*this.hertz/250);if(typeof this.lastTmpValue!="undefined"){this.targetObject.vector.x+=(this.lastTmpValue-this.tmpValue)*this.peak.x;this.targetObject.vector.y+=(this.lastTmpValue-this.tmpValue)*this.peak.y}this.lastTmpValue=this.tmpValue};return shaking}function Swinging(actor,radius,hertz,swingcenterX,swingcenterY,degreeOffset,triggeredByAction,reactionTargetIndex){var swinging=new Plugin(0,0,actor,triggeredByAction,reactionTargetIndex);swinging.degrees=0;swinging.runningValue=0;swinging.radius=radius;swinging.hertz=hertz;swinging.swingcenterX=swingcenterX;swinging.swingcenterY=swingcenterY;swinging.degreeOffset=degreeOffset;swinging.reset=function(){this.oldDegrees=0;this.newDegrees=0;this.firstRun=!0};swinging.applybehavior=function(){this.runningValue=Math.sin(new Date*this.hertz/1e3);this.degrees=this.runningValue*this.radius;if(this.firstRun)this.firstRun=!1;else{this.targetObject.tilt=this.degreeOffset+this.degrees/2;this.targetObject.image.style.transformOrigin=this.swingcenterX+"px "+this.swingcenterY+"px";this.targetObject.image.style.webkitTransformOrigin=this.swingcenterX+"px "+this.swingcenterY+"px";this.targetObject.image.style.msTransformOrigin=this.swingcenterX+"px "+this.swingcenterY+"px";this.targetObject.image.style.transform="rotate("+this.targetObject.tilt+"deg)";this.targetObject
.image.style.webkitTransform="rotate("+this.targetObject.tilt+"deg)";this.targetObject.image.style.msTransform="rotate("+this.targetObject.tilt+"deg)"}};return swinging}function togglesText(actor,initiallyVisible,alternativeImagePath){this.reset=function(){this.force={x:forceX,y:forceY}};this.reset();this.applybehavior=function(){actor.vector.x+=this.force.x;actor.vector.y+=this.force.y}}function Waving(actor,radius,hertz,centerOffsetX,centerOffsetY,triggeredByAction,reactionTargetIndex){var waving=new Plugin(0,0,actor,triggeredByAction,reactionTargetIndex);waving.reset=function(){this.actor=actor;this.hertz=hertz;this.radius=radius};waving.applybehavior=function(){typeof this.wavingStartedAt=="undefined"&&(this.wavingStartedAt=now());this.skew=Math.sin((this.wavingStartedAt-now())*this.hertz/1e3)*this.radius;this.actor.image.style.webkitTransformOrigin=centerOffsetX+"px "+centerOffsetY+"px";this.actor.image.style.webkitTransform="skew("+this.skew+"deg, 0deg)";this.actor.image.style.transformOrigin=centerOffsetX+"px "+centerOffsetY+"px";this.actor.image.style.transform="skew("+this.skew+"deg, 0deg)";this.actor.image.style.msTransformOrigin=centerOffsetX+"px "+centerOffsetY+"px";this.actor.image.style.msTransform="skew("+this.skew+"deg, 0deg)";this.actor.image.style.OTransformOrigin=centerOffsetX+"px "+centerOffsetY+"px";this.actor.image.style.OTransform="skew("+this.skew+"deg, 0deg)"};return waving}var Actor=function(imagePath,startX,startY,imagesizeX,imagesizeY){var defaultImageDirectory="images/",defaultAudioDirectory="audio/";this.startAnimationTimestamp=now();this.resetStartAnimationTimestamp=function(){this.startAnimationTimestamp=now()};this.startPosition={x:startX,y:startY};this.vector={x:0,y:0};this.spin=0;this.tilt=0;this.behaviors=new Array;this.reactions=new Array;this.reactionTargets=new Array;this.phases=new Array;this.oldPhase=0;this.phaseCycle=1e3;this.doesReset=!1;this.waitingForReset=!1;this.waitingForResetSince=null;this.lastVisibilityCheckInSeconds=now();this.currentOpacity=1;this.currentlyVisible=!0;this.originalOpacity=1;this.originaldelay=0;this.delay=0;this.scene=null;this.enteredAt=null;this.navigatesOnTouch=function(sceneid,secondImageFilename){this.reacts("window.animation.showScene('"+sceneid+"')",0);this.image.className+="navigation";this.scene.preloadSceneIds.push(sceneid)};this.loadsOnTouch=function(sceneid,secondImageFilename){this.reacts("window.animation.reloadAndFadeToScene('"+sceneid+"')",0);this.image.className+="navigation"};this.delays=function(myDelay){this.originaldelay=myDelay;this.delay=myDelay};this.age=function(){return now()-this.startAnimationTimestamp};this.alterOpacity=function(newOpacity){if(newOpacity!=this.currentOpacity){this.currentOpacity=newOpacity;this.image.style.opacity=this.currentOpacity;this.image.style.filter="alpha(opacity="+this.newOpacity*100+")"}};this.setInitialOpacity=function(newOpacity){this.originalOpacity=newOpacity;this.alterOpacity(newOpacity)};this.setInvisible=function(){this.image.style.visibility="hidden";this.currentlyVisible=!1};this.setVisible=function(newOpacity){typeof newOpacity!="undefined"&&this.alterOpacity(newOpacity);this.image.style.visibility="";this.currentlyVisible=!0};this.resets=function(resetDelay){this.doesReset=!0;typeof resetDelay=="undefined"&&(resetDelay=0);this.resetDelay=resetDelay};this.resetReactions=function(){for(var i=this.reactions.length-1;i>=0;i--)this.reactions[i].reset()};this.resetBehaviors=function(){for(var i=this.behaviors.length-1;i>=0;i--)this.behaviors[i].reset()};this.cleanupBehaviors=function(){for(var i=this.behaviors.length-1;i>=0;i--)this.behaviors[i].cleanup()};this.reset=function(){this.resetBehaviors();this.resetReactions();this.image.src=defaultImageDirectory+this.image.originalPath;this.resetStartAnimationTimestamp();this.position={x:startX,y:startY};this.vector={x:0,y:0};this.lastVector={x:0,y:0};this.setSize(imagesizeX,imagesizeY);this.setInitialOpacity(this.originalOpacity);this.delay=this.originaldelay;this.finishedDelaying=!1;this.startedDelayingAt=null;this.tilt=0;moveActor(this);tiltActor(this)};this.removeBehaviorsThatCameFromReacts=function(){var newBehaviors=[];for(var i=this.behaviors.length-1;i>=0;i--)this.behaviors[i].triggeredByAction||newBehaviors.push(this.behaviors[i]);this.behaviors.length!=newBehaviors.length&&(this.behaviors=newBehaviors)};this.setSize=function(width,height){this.imagesize={x:width,y:height};this.image.style.width=width+"px";this.image.style.height=height+"px"};this.enter=function(myScene){myScene.div.appendChild(this.image);this.enteredAt=now()};this.addBehavior=function(myBehavior){try{myBehavior.reset()}catch(e){}this.behaviors.push(myBehavior)};if(typeof delay!="undefined"){this.delay=parseInt(delay);this.startedDelayingAt=null;this.finishedDelaying=!1}this.addPhase=function(phaseImagePath){var tmpImage=document.createElement("img");tmpImage.setAttribute("src",defaultImageDirectory+phaseImagePath);this.phases.push(defaultImageDirectory+phaseImagePath)};this.setPhaseCycleLength=function(milliseconds){this.phaseCycle=milliseconds};this.currentPhase=function(){var myPhase=0,numberOfPhases=this.phases.length;if(numberOfPhases>1){var passedTimeSinceEntered=now()-this.enteredAt,lengthOfPhase=this.phaseCycle/numberOfPhases,rest=passedTimeSinceEntered%(numberOfPhases*lengthOfPhase);myPhase=parseInt(rest/lengthOfPhase)}return myPhase};this.setup=function(){this.image=document.createElement("img");this.image.originalPath=imagePath;this.filename=imagePath.substring(imagePath.lastIndexOf("/")+1);this.image.setAttribute("src",defaultImageDirectory+this.image.originalPath);this.image.actor=this;this.phases.push(defaultImageDirectory+imagePath);this.position={x:startX,y:startY};this.setSize(imagesizeX,imagesizeY);this.vector={x:0,y:0};bindEvent(this.image,"mousedown",function(){this.actor.react()});moveActor(this)};this.setup();this.addClass=function(newclass){this.image.className+=newclass};this.hasId=function(newid){this.image.setAttribute("id",newid)}};Array.prototype.minus=function(secondarr){var result=this;for(var i=result.length-1;i>=0;i--)for(var j=secondarr.length-1;j>=0;j--)if(secondarr[j].match(result[i])){result=result.without(i);break}return result};Array.prototype.without=function(index){var part1=index>0?this.slice(0,index):[],part2=this.slice(index+1);return part1.concat(part2)};bindEvent(window,"click",getClickPosition);if(!window.console)var console={log:function(){},warn:function(){},error:function(){},time:function(){},timeEnd:function(){}};Number.prototype.subtractUntilZero=function(subtract){return subtract>=this?0:this-subtract};Number.prototype.addUntilTarget=function(addAmount,target){var ret=this+addAmount;return ret>target?target:ret};var developermode=!1;requestAnimFrame=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(callback,element){window.setTimeout(callback,1e3/60)}}();var Reaction=function(actor,reactioncode,reactHowOften){this.actor=actor;this.reactioncode=reactioncode;this.reactHowOften=reactHowOften;this.runs=0;if(notNumeric(this.reactHowOften)||this.reactHowOften<0)this.reactHowOften=0;this.reset=function(){if(this.runs>0){this.actor.image.style.cursor="pointer";this.runs=0}};return this};Actor.prototype.react=function(){for(var i=0;i<this.reactions.length;i++){var myReaction=this.reactions[i];if(myReaction.reactHowOften==0||myReaction.runs<myReaction.reactHowOften){eval(myReaction.reactioncode.replace("reactionTargetIndex",i));myReaction.runs++;myReaction.reactHowOften>0&&myReaction.runs>=myReaction.reactHowOften&&(this.image.style.cursor="auto")}}};Actor.prototype.reacts=function(reactioncode,reactHowOften,reactionTarget){this.image.style.cursor="pointer";reactionTarget=typeof reactionTarget=="undefined"?this:reactionTarget;var reaction=new Reaction(this,reactioncode,reactHowOften,reactionTarget);this.reactions.push(reaction);this.reactionTargets.push(reactionTarget)};Actor.prototype.reactsOnce=function(reactioncode,reactionTarget){this.image.style.cursor="pointer";reactionTarget=typeof reactionTarget=="undefined"?this:reactionTarget;var reaction=new Reaction(this,reactioncode,1,reactionTarget);this.reactions.push(reaction)};Actor.prototype.reactsTwice=function(reactioncode,reactionTarget){this.image.style.cursor="pointer";reactionTarget=typeof reactionTarget=="undefined"?this:reactionTarget;var reaction=new Reaction(this,reactioncode,2,reactionTarget);this.reactions.push(reaction)};Actor.prototype.appears=function(startAfter,appearLength,startsVisible,triggeredByAction,reactionTargetIndex){var behavior=new Appearing(this,startAfter,appearLength,startsVisible,triggeredByAction,reactionTargetIndex);typeof triggeredByAction!="undefined"&&(behavior.triggeredByAction=triggeredByAction);this.addBehavior(behavior)};Actor.prototype.appearsOnTouch=function(appearLength){this.setInitialOpacity(0);this.reacts("this.appears(0,"+appearLength+", true, false, reactionTargetIndex);",1)};Actor.prototype.letsAppearStartsVisible=function(targetObject,appearLength){this.reacts("this.appears(0, "+floatValueOfOr(appearLength,1e3)+", true, true, reactionTargetIndex);",1,targetObject)};Actor.prototype.letsAppear=function(targetObject,appearLength){targetObject.setInvisible();this.reacts("this.appears(0, "+floatValueOfOr(appearLength,1e3)+", false, true, reactionTargetIndex);",1,targetObject)};Actor.prototype.changesImageSrc=function(newPath,triggeredByAction,reactionTargetIndex){this.addBehavior(new ChangingImageSrc(this,newPath,triggeredByAction,reactionTargetIndex))};Actor.prototype.changesImageSrcOnTouch=function(newPath){this.reacts("this.changesImageSrc('"+newPath+"', true, reactionTargetIndex);",1)};Actor.prototype.letsChangeImageSrc=function(targetObject,newPath){this.reacts("this.changesImageSrc('"+newPath+"', true, reactionTargetIndex);",1,targetObject)};Actor.prototype.circles=function(radius,hertz,triggeredByAction,reactionTargetIndex){this.addBehavior(new Circling(this,radius,hertz,!1,triggeredByAction,reactionTargetIndex))};Actor.prototype.circlesWithTilt=function(radius,hertz,triggeredByAction,reactionTargetIndex){this.addBehavior(new Circling(this,radius,hertz,!0,triggeredByAction,reactionTargetIndex))};Actor.prototype.clonesMovement=function(parentActor,distanceX,distanceY,triggeredByAction,reactionTargetIndex){this.addBehavior(new MovementCloning(this,parentActor,distanceX,distanceY,triggeredByAction,reactionTargetIndex))};Actor.prototype.letsCount=function(targetObject,amount){targetObject.addBehavior(new CountResetter(targetObject));targetObject.counter=0;targetObject.addsToCounter(0);this.reacts("this.addsToCounter("+amount+", true, reactionTargetIndex);",0,targetObject)};Actor.prototype.addsToCounter=function(amount,triggeredByAction,reactionTargetIndex){var targetObject;triggeredByAction?targetObject=this.reactionTargets[reactionTargetIndex]:targetObject=this;targetObject.counter+=amount;typeof targetObject.hasTextDiv=="undefined"?targetObject.setText(targetObject.counter):targetObject.originalText.indexOf("%count%")>=0?targetObject.setText(targetObject.originalText.replace("%count%",targetObject.counter)):targetObject.setText(targetObject.counter)};Actor.prototype.multipliesCounter=function(amount,triggeredByAction,reactionTargetIndex){var targetObject;triggeredByAction?targetObject=this.reactionTargets[reactionTargetIndex]:targetObject=this;targetObject.counter*=amount;typeof targetObject.hasTextDiv=="undefined"?targetObject.setText(targetObject.counter):targetObject.originalText.indexOf("%count%")>=0?targetObject.setText(targetObject.originalText.replace("%count%",targetObject.counter)):targetObject.setText(targetObject.counter)};Actor.prototype.letsMultiply=function(targetObject,amount){targetObject.counter=0;this.reacts("this.multipliesCounter("+amount+", true, reactionTargetIndex);",0,targetObject)};Actor.prototype.dissolves=function(startAfter,dissolveLength,triggeredByAction,reactionTargetIndex){var behavior=new Dissolving(this,startAfter,dissolveLength,triggeredByAction,reactionTargetIndex);typeof triggeredByAction!="undefined"&&(behavior.triggeredByAction=triggeredByAction);this.addBehavior(behavior)};Actor.prototype.dissolvesOnTouch=function(dissolveLength){this.reacts("this.dissolves(0, "+floatValueOfOr(dissolveLength,1e3)+", true, reactionTargetIndex);",1)};Actor.prototype.letsDissolve=function(targetObject,dissolveLength){this.reacts("this.dissolves(0, "+floatValueOfOr(dissolveLength,1e3)+", true, reactionTargetIndex);",1,targetObject)};Actor.prototype.drifts=function(forceX,forceY,triggeredByAction,reactionTargetIndex){this.addBehavior(new Drifting(this,forceX,forceY,triggeredByAction,reactionTargetIndex))};Actor.prototype.driftsOnTouch=function(forceX,forceY){this.reacts("this.drifts("+forceX+","+forceY+", true, reactionTargetIndex);",1)};Actor.prototype.letsDrift=function(targetObject,forceX,forceY){this.reacts("this.drifts("+forceX+","+forceY+", true, reactionTargetIndex);",1,targetObject)};Actor.prototype.clones=function(parentActor){this.addBehavior(new Drifting(this,forceX,forceY,triggeredByAction,reactionTargetIndex))};Actor.prototype.clonesOnTouch=function(forceX,forceY){this.reacts("this.clones("+forceX+","+forceY+", true, reactionTargetIndex);",1)};Actor.prototype.letsDrift=function(targetObject,forceX,forceY){this.reacts("this.clones("+forceX+","+forceY+", true, reactionTargetIndex);",1,targetObject)};Actor.prototype.setText=function(content,divid,domclass,triggeredByAction,reactionTargetIndex){typeof this.hasTextDiv=="undefined"?this.addBehavior(new HavingText(this,content,divid,domclass,triggeredByAction,reactionTargetIndex)):this.hasTextDivInner.innerHTML=content};Actor.prototype.links=function(url){this.addBehavior(new Linking(this,url))};Actor.prototype.moves=function(initialForceX,initialForceY,friction,gravitation,delay,easeIn){this.addBehavior(new Moving(this,initialForceX,initialForceY,friction,gravitation,delay,easeIn))};Actor.prototype.movesOnTouch=function(initialForceX,initialForceY,friction,gravitation,delay,easeIn){var tmpString=initialForceX+","+initialForceY;typeof friction!="undefined"&&(tmpString+=", "+friction);typeof gravitation!="undefined"&&(tmpString+=", "+gravitation);typeof delay!="undefined"&&(tmpString+=", "+delay);typeof easeIn!="undefined"&&(tmpString+=", "+easeIn);this.reacts("this.moves("+tmpString+");")};Actor.prototype.movesTo=function(targetX,targetY,forceX,forceY,triggeredByAction,reactionTargetIndex){triggeredByAction=typeof triggeredByAction=="undefined"?!1:triggeredByAction;for(var i=this.behaviors.length-1;i>=0;i--)try{this.behaviors[i].finishedMovingTo=!0}catch(e){}for(var i=this.scene.actors.length-1;i>=0;i--)for(var j=0;j<this.scene.actors[i].behaviors.length;j++)try{if(this.scene.actors[i].reactionTargets[j].filename===this.filename){this.scene.actors[i].behaviors[j].finishedMovingTo=!0;l("finished")}}catch(e){l("not applicable")}var behavior=new MovingTo(this,targetX,targetY,forceX,forceY,triggeredByAction,reactionTargetIndex);this.addBehavior(behavior)};Actor.prototype.movesToOnTouch=function(targetX,targetY,forceX,forceY){this.reacts("this.movesTo("+targetX+","+targetY+","+forceX+","+forceY+", true, reactionTargetIndex);",1)};Actor.prototype.letsMoveTo=function(targetObject,targetX,targetY,forceX,forceY){this.reacts("this.movesTo("+targetX+","+targetY+","+forceX+","+forceY+", true, reactionTargetIndex);",1,targetObject)};Actor.prototype.movesToOnTouch=function(targetX,targetY,forceX,forceY){this.reacts("this.movesTo("+targetX+","+targetY+","+forceX+","+forceY+", true, reactionTargetIndex);",1)};Actor.prototype.multichoices=function(triggeredByAction,reactionTargetIndex){this.addBehavior(new Multichoicing(this,triggeredByAction,reactionTargetIndex))};Actor.prototype.isQuestion=function(rightanswers,wronganswers,nextQuestion,imageOnRightAnswer,imageOnWrongAnswer,soundOnRightAnswer,soundOnWrongAnswer,isLast){this.rightanswers=rightanswers;this.wronganswers=wronganswers;nextQuestion.setInvisible();for(var i=rightanswers.length-1;i>=0;i--){isLast?rightanswers[i].letsAppear(nextQuestion,1):rightanswers[i].letsAppearAsQuestion(nextQuestion,1);rightanswers[i].letsChangeImageSrc(this,imageOnRightAnswer);rightanswers[i].plays(soundOnRightAnswer,imageOnRightAnswer);rightanswers[i].letsChangeImageSrc(rightanswers[i],imageOnRightAnswer);rightanswers[i].setInvisible();for(var i=wronganswers.length-1;i>=0;i--)rightanswers[i].letsDissolve(wronganswers[i])}for(var i=wronganswers.length-1;i>=0;i--)wronganswers[i].setInvisible();for(var i=wronganswers.length-1;i>=0;i--){wronganswers[i].letsChangeImageSrc(wronganswers[i],imageOnWrongAnswer);wronganswers[i].plays(soundOnWrongAnswer,imageOnWrongAnswer)}};Actor.prototype.isLastQuestion=function(rightanswers,wronganswers,nextQuestion,imageOnRightAnswer,imageOnWrongAnswer,soundOnRightAnswer,soundOnWrongAnswer){this.isQuestion(rightanswers,wronganswers,nextQuestion,imageOnRightAnswer,imageOnWrongAnswer,soundOnRightAnswer,soundOnWrongAnswer,!0)};Actor.prototype.appearsAsQuestion=function(triggeredByAction,reactionTargetIndex){this.addBehavior(new AppearingAsQuestion(this,triggeredByAction,reactionTargetIndex))};Actor.prototype.letsAppearAsQuestion=function(targetObject){this.reacts("this.appearsAsQuestion(true, reactionTargetIndex);",1,targetObject)};Actor.prototype.passesTouchThrough=function(){this.image.style.pointerEvents="none"};Actor.prototype.playsOnLoad=function(audioFilename,playingImagePath){var myactor=this,behavior=new Playing(myactor,audioFilename,playingImagePath,!1,!0);setTimeout(function(){myactor.addBehavior(behavior)},500)};Actor.prototype.plays=function(audioFilename,playingImagePath){var myactor=this;setTimeout(function(){myactor.addBehavior(new Playing(myactor,audioFilename,playingImagePath,!1,!1))},500)};Actor.prototype.playsLoop=function(audioFilename,playingImagePath,betweenLoops){var myactor=this,behavior=new Playing(myactor,audioFilename,playingImagePath,!0,!1,betweenLoops);setTimeout(function(){myactor.addBehavior(behavior)},500)};Actor.prototype.playsLoopOnLoad=function(audioFilename,playingImagePath,betweenLoops){var myactor=this,behavior=new Playing(myactor,audioFilename,playingImagePath,!0,!0,betweenLoops);setTimeout(function(){myactor.addBehavior(behavior)},500)};Actor.prototype.playsAndPulsates=function(audioFilename,playingImagePath){var myactor=this,behavior=new Playing(myactor,audioFilename,playingImagePath);myactor.pulsatesWhilePlaying=!0;setTimeout(function(){myactor.addBehavior(behavior)},500)};Actor.prototype.hasPopup=function(url,width,height,offsetX,offsetY,closeAfter,triggeredByAction,reactionTargetIndex){this.addBehavior(new Popup(this,url,width,height,offsetX,offsetY,closeAfter,triggeredByAction,reactionTargetIndex))};Actor.prototype.hasPopupOnTouch=function(url,width,height,offsetX,offsetY,closeAfter){this.reacts("this.hasPopup('"+url+"', "+width+", "+height+", "+offsetX+", "+offsetY+", "+closeAfter+", true, reactionTargetIndex);",0)};Actor.prototype.pulsates=function(hertz,strength,pulsateHowOften,triggeredByAction,reactionTargetIndex){var behavior=new Pulsating(this,hertz,strength,pulsateHowOften,triggeredByAction,reactionTargetIndex);this.addBehavior(behavior)};Actor.prototype.pulsatesOnTouch=function(hertz,strength,pulsatehowOften,reactHowOften){this.reacts("this.pulsates("+hertz+", "+strength+", "+pulsatehowOften+", true, reactionTargetIndex);",reactHowOften)};Actor.prototype.letsPulsate=function(targetObject,hertz,strength,pulsateHowOften,reactHowOften){this.reacts("this.pulsates("+hertz+", "+strength+", "+pulsateHowOften+", true, reactionTargetIndex);",reactHowOften,targetObject)};Actor.prototype.triggerResetReactions=function(triggeredByAction,reactionTargetIndex){this.reactionTargets[reactionTargetIndex].resetReactions()};Actor.prototype.letsResetReactions=function(targetObject,appearLength,startVisible){this.reacts("this.triggerResetReactions(true, reactionTargetIndex)",1,targetObject)};Actor.prototype.rotates=function(hertz,triggeredByAction,reactionTargetIndex){var behaviour=new Rotating(this,hertz,triggeredByAction,reactionTargetIndex);this.addBehavior(behaviour)};Actor.prototype.rotatesOnTouch=function(hertz,reactsHowOften,triggeredByAction,reactionTargetIndex){this.reacts("this.rotates("+hertz+", true, reactionTargetIndex);",reactsHowOften)};Actor.prototype.letsRotate=function(targetObject,hertz,reactsHowOften){this.reacts("this.rotates("+hertz+", true, reactionTargetIndex);",reactsHowOften,targetObject)};Actor.prototype.shakes=function(peakX,peakY,hertz,triggeredByAction,reactionTargetIndex){this.addBehavior(new Shaking(this,peakX,peakY,hertz,triggeredByAction,reactionTargetIndex))};Actor.prototype.shakesOnTouch=function(peakX,peakY,hertz,reactHowOften){reactHowOften=typeof reactHowOften=="undefined"?1:reactHowOften;this.reacts("this.shakes("+peakX+","+peakY+","+hertz+");",reactHowOften)};Actor.prototype.letsShake=function(targetObject,peakX,peakY,hertz,reactHowOften){reactHowOften=typeof reactHowOften=="undefined"?1:reactHowOften;this.reacts("this.shakes("+peakX+","+peakY+","+hertz+", true, reactionTargetIndex	);",reactHowOften,targetObject)};Actor.prototype.swings=function(radius,hertz,swingcenterX,swingcenterY,degreeOffset,triggeredByAction,reactionTargetIndex){this.addBehavior(new Swinging(this,radius,hertz,swingcenterX,swingcenterY,degreeOffset,triggeredByAction,reactionTargetIndex))};Actor.prototype.toggle=function(alternativeImagePath){if(this.scene.textDisplaying){this.image.src="images/"+this.textToggleAlternativeImagePath;this.scene.hideText()}else{this.image.src="images/"+this.image.originalPath;this.scene.showText()}};Actor.prototype.togglesTextOnTouch=function(alternativeImagePath){this.textToggleAlternativeImagePath=alternativeImagePath;this.reacts("this.toggle();")};Actor.prototype.waves=function(radius,hertz,centerOffsetX,centerOffsetY){this.addBehavior(new Waving(this,radius,hertz,centerOffsetX,centerOffsetY))};